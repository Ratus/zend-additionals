<?php
namespace ZendAdditionals\Db\Mapper;

class Attribute extends AbstractMapper
{
    const SERVICE_NAME = 'ZendAdditionals\Db\Mapper\Attribute';

    protected $tableName           = 'attributes';
    protected $autoGenerated       = 'id';
    protected $tablePrefixRequired = true;

    protected $primaries = array(
        array('id'),
    );

    public function getIdByLabel($label, $tablePrefix)
    {
        $result = $this->getAttributeByLabel($label, $tablePrefix);
        return $result->getId();
    }

    public function getAttributeByLabel($label, $tablePrefix)
    {
        $select = $this->getSelect($tablePrefix . $this->getTableName())->where(array('label' => $label));

        return $this->getCurrent($select);
    }

    public function getAttributeById($id, $tablePrefix)
    {
        $select = $this->getSelect($tablePrefix . $this->getTableName())->where(array('id' => $id));
        return $this->getCurrent($select);
    }

    protected function getAllowFilters()
    {
        return true;
    }
}

